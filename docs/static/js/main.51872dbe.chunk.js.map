{"version":3,"sources":["libs/info.js","libs/util.js","libs/traveler.js","libs/localmodel.js","libs/attr.js","libs/mocktest.js","libs/quest.js","libs/queue.js","contexts/MyLocalModel.tsx","components/Gnb.tsx","components/AttrModal.tsx","components/Quest.tsx","components/MockTest.tsx","components/MockTestModal.tsx","components/Main.tsx","AppIn.tsx","App.tsx","index.tsx"],"names":["Info","names","attrs","console","assert","Array","length","this","comment","parent","childs","id","jsid","jsidcnt","module","exports","Util","min","max","Math","ceil","floor","random","n","N","Error","out","i","shuffle","slice","arr","outplace","temp","idx1","idx2","random_int","random_choices","map","idx","get_randomly","require","Traveler","forEachPre","root","consummer","forEach","child","forEachPost","selectNegativeInfos","material","comm","visited","info","traverseUp","push","selectPositiveAttrs","get_randomly_multi","selectNegativeAttrs","infos","concat","Attr","Mocktest","axios","default","LocalModel","devmode","wp","url","callback","window","setTimeout","name","method","params","then","response","data","state","log","msg","myJson","ids","catch","err","createSubject","createAttr","createInfo","moveToParent","nodes","pInfo","newNode","__allocateInfo","pAttr","__appendAttr","prefix","content","postfix","edges","pair","__appendInfo","curnode","reverse","undefined","newInfo","Date","getTime","parentId","aid","attr","create_mocktest","newAttr","pinfo","nidx","josa","Quest","quests","select_test_materials","subinfos","ratio","m","quotient","k","domains","quest_types","type_ptr","new_quest","generate_binary_quest","generate_short_quest","feasible","filter","invert","generate_selection_quest","generate_selection2_quest","Queue","type","title","statement","choices","answers","materials","isArray","evaluate","quest","evaluator","ans","fact","getHintSentence","getFullSentence","a","inv","p","pos","neg","indexOf","logic_label","sort","stmt","neg_infos","first","last","size","value","next","empty","LocalModelCN","LocalModelContext","createContext","LocalModelDispatchContext","LocalModelReducer","action","currentPath","path","subjects","MyLocalModelContextProvider","children","useReducer","localModel","dispatch","Provider","useMyLocalModel","useContext","useMyLocalModelDispatch","GnbWrapper","styled","div","Gnb","MyLocalModel","handleExitToMainPageButton","useCallback","e","exitToMainPage","handleGoToUpperPageButton","getCurrentPath","reduce","prev","curr","onClick","customStyles","overlay","backgroundColor","padding","width","minwidth","maxWidth","border","borderRadius","top","left","right","bottom","marginRight","transform","boxSizing","Modal","setAppElement","ModalContents","SelBox","ul","SelElem","li","ImportantButtonWrapper","Preview","InputBox","SelButton","button","props","selected","checkBatchimEnding","word","uni","charCodeAt","makeSentence","prefixes","postfixes","string","trim","AttrModal","contentInputRef","useRef","React","useState","modalIsOpen","setIsOpen","setPrefix","setPostfix","setContent","preview","setPreview","isBatchimContent","setIsBatchimContent","closeModal","document","body","style","position","isBatchimName","prefixList","postfixList","handleMdoalBodyClick","current","focus","handlePrefixClick","handlePostfixClick","handleChangeContent","target","commitAttrHandler","prefixDecider","postfixDecider","getCurrentInfo","alert","Fragment","closeTimeoutMS","isOpen","onRequestClose","contentLabel","onAfterClose","shouldCloseOnOverlayClick","onAfterOpen","x","key","placeholder","ref","onChange","disabled","QuestElem","Statement","Selection","InputAnswer","QuestComp","order","setSelectionFn","selection","setValueAsync","newArr","onChange2","inputChangeHandler","split","b","stopPropagation","htmlFor","checked","toString","MockTestWrapper","MockTestTitle","MockTestBody","MockTestExit","MockTest","closeHandler","fill","setSelection","closeClickHandler","defaultProps","height","overflow","MockTestModal","mockTestData","setModalIsOpen","setMockTestData","MainWrapper","CenterWrapper","Button","danger","Subjects","Subject","add","InfoWrapper","Attrs","InfoList","CreateProblemWrapper","CreateProblemButton","Main","isOpenMockTest","setIsOpenMockTest","handleIntoSubject","moveToSubject","recvInfo","handleIntoInfo","moveToChild","savedInfo","handleCreateAndIntoSubject","input_subject","prompt","handleAddInfo","input_info","handleCreateMockTest","createMocktest","join","AppIn","useEffect","getSubjectsList","recv","className","preventDefault","App","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.51872dbe.chunk.js","sourcesContent":["class Info {\n\t/*\n\t\tString[] names: 지식의 이름들, 반드시 1개 이상\n\t\tAttr  [] attrs: 지식의 속성들\n\t*/\n\tconstructor(names, attrs) {\n\t\tconsole.assert(names instanceof Array && names.length > 0);\n\t\tconsole.assert(attrs instanceof Array);\n\n\t\tthis.names = names;\n\t\tthis.attrs = attrs;\n\t\tthis.comment = '';\n\n\t\t// parent는 이 Info를 소유한 지식을 레퍼런스로 저장한다.\n\t\t// childs는 이 Info가 가진 하위 지식(들)을 레퍼런스로 저장한다.\n\t\tthis.parent = null;\n\t\tthis.childs = [];\n\n\t\t// id는 DB에 지식이 처음으로 저장될 때 할당받는다.\n\t\t// 클라이언트에서 생성된 지식은 id를 갖지 않는다.\n\t\tthis.id = null;\n\n\t\t// jsid는 클라이언트에서 임의의 두 지식을 식별하기 위한 값이다.\n\t\t// 이 값은 클라이언트가 실행된 이후로 Info가 생성된 순서와 같다.\n\t\t// 본래 id가 그 역할을 했으나, 몽고 DB에서의 고유키를 저장하는 것으로 바뀌면서\n\t\t// jsid가 탄생하였다. jsid의 유일성은 한 세션 내에서만 보장된다.\n\t\tthis.jsid = Info.jsidcnt++;\n\t\t\n\t\t//this.ext = [];\n\t}\n\n\ttoJSON() {\n\t\treturn {\n\t\t\tnames: this.names,\n\t\t\tattrs: this.attrs,\n\t\t\tcomment: this.comment,\n\t\t\tid: this.id\n\t\t};\n\t}\n}\n\nInfo.jsidcnt = 0;\n\nmodule.exports = Info;","const Util = {};\n\n/*\n\tmin ≤ x ≤ max, x ∈ Z를 만족하는 임의의 정수를 반환한다.\n*/\nUtil.random_int = function(min, max) {\n\tmin = Math.ceil(min);\n\tmax = Math.floor(max);\n\treturn Math.floor(Math.random() * (max - min) + min + 0.5);\n};\n\n/*\n\tmin ≤ x ≤ max, x ∈ Z를 만족하는 중복되지 않는\n\tn개의 서로 다른 x를 만들어서 반환한다.\n\tO(max - min)의 공간복잡도와 시간복잡도가 발생한다.\n*/\nUtil.random_choices = function(min, max, n) {\n\tmin = Math.ceil(min);\n\tmax = Math.floor(max);\n\tlet N = max - min + 1;\n\tif(N < n) {\n\t\tthrow new Error(`[random_choice] Cannot choose ${n} different numbers between ${min} ~ ${max}`);\n\t}\n\n\t// min ~ max까지의 숫자를 만든다\n\tlet out = [];\n\tfor(let i = 0; i < N; ++i)\n\t\tout[i] = min + i;\n\n\t// 적당히 섞는다.\n\tUtil.shuffle(out);\n\n\t// n개만 반환한다.\n\tif(n == N)\n\t\treturn out;\n\telse\n\t\treturn out.slice(0, n);\n};\n\n/*\n\tarr를 무작위로 섞는다.\n\toutplace가 true이면 새 배열을 반환한다.\n*/\nUtil.shuffle = function(arr, outplace) {\n\tif(outplace)\n\t\tarr = arr.slice();\n\tlet temp, idx1, idx2;\n\tfor(let i = 0; i < 4 * arr.length; ++i) {\n\t\tidx1 = Util.random_int(0, arr.length - 1);\n\t\tidx2 = Util.random_int(0, arr.length - 1);\n\t\ttemp = arr[idx1];\n\t\tarr[idx1] = arr[idx2];\n\t\tarr[idx2] = temp;\n\t}\n\treturn arr;\n};\n\n/*\n\t배열 arr에서 아무 원소나 반환한다.\n\t시간 복잡도가 O(1)이다\n*/\nUtil.get_randomly = function(arr) {\n\treturn arr[Util.random_int(0, arr.length - 1)];\n};\n\n/*\n\t배열 arr에서 아무 원소를 n개 찍어서 반환한다.\n\t시간 복잡도가 O(n)이다\n*/\nUtil.get_randomly_multi = function(arr, n) {\n\treturn Util.random_choices(0, arr.length - 1, n).map(idx => {\n\t\treturn arr[idx];\n\t});\n};\n\n/*\n\t배열 arr에서 아무 원소를 n개 찍어서 반환한다.\n\t중복이 허용된다.\n*/\nUtil.get_randomly_multi_dup = function(arr, n) {\n\tlet out = [];\n\tfor(let i = 0; i < n; ++i)\n\t\tout[i] = Util.get_randomly(arr);\n\treturn out;\n};\n\nmodule.exports = Util;","const Util = require('./util');\n\n/*\n\tTraveler 클래스는 알고리즘이 트리를 쉽게\n\t탐색 할 수 있도록 도와주는 유틸리티 클래스다.\n*/\nclass Traveler {\n};\n\n/*\n\t전위탐색으로 트리를 순회하며 consummer를 호출한다.\n\n\tInfo root\n\t\t트리의 루트 주제\n\n\tfunction(info) consummer\n\t\t순회하면서 호출할 함수\n*/\nTraveler.forEachPre = function(root, consummer) {\n\tconsummer(root);\n\troot.childs.forEach(child => {\n\t\tTraveler.forEachPre(child, consummer);\n\t});\n};\n\n/*\n\t후위탐색으로 트리를 순회하며 consummer를 호출한다.\n\n\tInfo root\n\t\t트리의 루트 주제\n\n\tfunction(info) consummer\n\t\t순회하면서 호출할 함수\n*/\nTraveler.forEachPost = function(root, consummer) {\n\troot.childs.forEach(child => {\n\t\tTraveler.forEachPost(child, consummer);\n\t});\n\tconsummer(root);\n};\n\n/*\n\tmaterial과 관계없는 지식들을 Info[]로 반환한다.\n\t정점 수 V에 대해 O(lg V)의 시간복잡도로 동작한다.\n\t반환된 배열의 앞쪽에 있는 지식일수록 그래프 상에서\n\t거리가 가깝다.\n*/\nTraveler.selectNegativeInfos = function(material) {\n\tconsole.assert(material != null);\n\n\tfunction traverseUp(root, comm) {\n\t\t// collect except visited node\n\t\troot.childs.forEach(child => {\n\t\t\tif (!comm.visited[child.jsid])\n\t\t\t{\n\t\t\t\t//comm.out.push(child);\n\t\t\t\tTraveler.forEachPre(child, info => {\n\t\t\t\t\tcomm.out.push(info);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\t// going up\n\t\tcomm.visited[root.jsid] = true;\n\t\tif (root.parent)\n\t\t\ttraverseUp(root.parent, comm);\n\t}\n\n\tlet comm = { visited: {}, out: [] };\n\tTraveler.forEachPre(material, info => {\n\t\tcomm.visited[info.jsid] = true;\n\t});\n\ttraverseUp(material, comm);\n\treturn comm.out;\n};\n\n/*\n\tmaterial과 관계있는 속성들을 Attr[]로 반환한다.\n\tn개를 찾지 못할 수도 있다.\n*/\nTraveler.selectPositiveAttrs = function(material, n) {\n\tconsole.assert(material != null);\n\tif (n <= 1)\n\t\treturn [Util.get_randomly(material.attrs)];\n\telse\n\t\treturn Util.get_randomly_multi(material.attrs, Math.min(n, material.attrs.length));\n};\n\n/*\n\tmaterial과 관계없는 속성들을 Attr[]로 반환한다.\n\tn개를 찾지 못할 수도 있따.\n*/\nTraveler.selectNegativeAttrs = function(material, n) {\n\tconsole.assert(material != null);\n\n\t// 속성을 전부 불러온다\n\tlet infos = Traveler.selectNegativeInfos(material);\n\tlet attrs = [];\n\tinfos.forEach(info => {\n\t\tattrs = attrs.concat(info.attrs);\n\t});\n\n\tif (n <= 1)\n\t\treturn [Util.get_randomly(attrs)];\n\telse\n\t\treturn Util.get_randomly_multi(attrs, Math.min(n, attrs.length));\n};\n\nmodule.exports = Traveler;","const Info = require('./info');\nconst Attr = require('./attr');\nconst Mocktest = require('./mocktest');\nconst axios = require('axios').default;\n\n/*\n\tLocalModel은 클라이언트에서 다루는 주제 트리와\n\t현재 위치 등을 다루는 상태 관리 클래스다.\n\t외부에서 트리 탐색을 좀 더 쉽게 할 수 있다.\n\n\tLocalModel의 내부에는 wp(working page)라는\n\t레퍼런스가 존재하며, 이것으로 현재 페이지를\n\t구분할 수 있다.\n*/\nclass LocalModel {\n  /*\n\t\t네트워크 통신 없이 내장된 모델로 수행하려면\n\t\tdevmode를 켜주세요.\n\t*/\n  constructor(devmode) {\n    // WorkingPointer(이하 wp)는 파일 시스템의\n    // Working Directory와 비슷한 개념으로,\n    // 현재 맥락(Context)에서 보여줄 지식을 가리킨다.\n    // 만약 주제에 진입하지 않은 경우 null을 가리킨다.\n    this.wp = null;\n\n    //\n    // jsid -> Info로 매핑해주는 변수\n    this.infos = {};\n\n    // 프론트 개발을 쉽게 할 목적으로 만든 모드\n    // 네트워크 통신을 수행하지 않고 미리 하드코딩한\n    // 모델을 사용한다.\n    this.devmode = devmode;\n\n    // 서버 주소\n    this.url = 'http://52.79.78.251:3000/v01/doc';\n  }\n\n  /*\n\t\t서버에 존재하는 모든 주제의 리스트를 불러와\n\t\tcallback으로 전달한다. 실패하면 []를 전달한다.\n\n\t\tdevmode에서는 하드코딩된 [{name: '국밥', id: 1}]을 전달한다.\n\n\t\t전달 형식:\n\t\t\t[{name: '주제명', id: '주제id'}]\n\t*/\n  getSubjectsList(callback) {\n    if (this.devmode) {\n      if (callback)\n        window.setTimeout(() => {\n          callback([{ name: '국밥', id: 1 }]);\n        }, 0);\n    } else {\n      // 요청 !\n      axios({\n        method: 'get',\n        url: this.url + '/getInfosList',\n        params: {},\n      })\n        .then((response) => {\n          // response에 대한 자세한 전달 데이터는\n          // https://git.alien.moe/ynifamily3/software-competition/wiki/%ED%86%B5%EC%8B%A0%EA%B7%9C%EA%B2%A9\n          // 참고\n          // 에러 체크\n          if (!response.data.state) {\n            console.log('[LocalModel::getSubjectsList] Fail to fetch data.');\n            console.log(response.data.msg);\n            if (callback) callback([]);\n            return;\n          }\n\n          console.log(response.data);\n          let myJson = response.data;\n\n          if (!callback) return;\n\n          let out = [];\n          for (let i = 0; i < myJson.names.length; ++i) {\n            out.push({\n              name: myJson.names[i],\n              id: myJson.ids[i],\n            });\n          }\n          callback(out);\n        })\n        .catch((err) => {\n          console.log('[LocalModel::getSubjectsList] Fail to fetch data.');\n          console.log(err);\n        });\n    }\n  }\n\n  /*\n\t\t서버에서 id를 ID로 갖는 주제를 불러온 뒤\n\t\t그 주제의 최상단 지식으로 이동한다.\n\n\t\t불러오는데 성공하면 callback으로 최상단 Info를\n\t\t전달하며 실패하면 callback으로 null을 전달한다.\n\n\t\tdevmode에서는 하드코딩된 국밥 주제를 로드하며\n\t\t항상 성공한다.\n\t*/\n  moveToSubject(id, callback) {\n    if (this.devmode) {\n      this.createSubject('국밥', null);\n      this.createAttr('은', '든든', '하다', null);\n      this.createAttr('은', '뜨뜻', '하다', null);\n\n      this.createInfo('돼지국밥', null);\n      this.createAttr('에는', '순대가 들어', '있다', null);\n      this.createAttr('은', '경남에서 유명', '하다', null);\n\n      this.createInfo('무봉리순대국밥', null);\n      this.createAttr('은', '경남의 체인점', '이다', null);\n      this.createAttr('에는', '20년째 운영하는 집도', '있다', null);\n\n      this.moveToParent();\n\n      this.createInfo('할매순대국밥', null);\n      this.createAttr('은', '실제로는 없는 브랜드', '이다', null);\n      this.createAttr('은', '어쩌면 하나쯤은 있을수도', '있다', null);\n\n      this.moveToParent();\n      this.moveToParent();\n\n      this.createInfo('소고기국밥', null);\n      this.createAttr('은', '대전이 맛있', '다', null);\n      this.createAttr('은', '얼큰한 국물이 인상적', '이다', null);\n      this.moveToParent();\n\n      // Comment\n      // 이거 나중에 Promise로 안바꾸면 재앙이\n      // 벌어질 것 같은 구조인데\\\n      if (callback)\n        window.setTimeout(() => {\n          callback(this.wp);\n        }, 0);\n      return;\n    }\n\n    axios({\n      method: 'get',\n      url: this.url + '/readInfo',\n      params: {\n        id: id,\n      },\n    })\n      .then((response) => {\n        // 에러 체크\n        if (!response.data.state) {\n          console.log('[LocalModel::moveToSubject] Fail to fetch data.');\n          console.log(response.data.msg);\n          if (callback) callback(null);\n          return;\n        }\n\n        // 토폴로지를 다시 재조립해준다.\n        // 원리는 다음과 같다.\n        // 1. 모든 Info를 일단 등록한다.\n        // 2. edges를 순회하며 연결해준다.\n        // 3. root를 this.wp에 등록한다.\n        let myJson = response.data;\n\n        // phase 1)\n        let nodes = myJson.nodes.map((pInfo) => {\n          // 새 Info 할당\n          let newNode = this.__allocateInfo(pInfo.name, []);\n          newNode.id = pInfo.id;\n\n          // 속성 등록\n          pInfo.attrs.forEach((pAttr) => {\n            this.__appendAttr(\n              newNode,\n              pAttr.prefix,\n              pAttr.content,\n              pAttr.postfix,\n              pAttr.id,\n            );\n          });\n\n          return newNode;\n        });\n\n        // phase 2)\n        myJson.edges.forEach((pair) => {\n          this.__appendInfo(nodes[pair[0]], nodes[pair[1]]);\n        });\n\n        // phase 3)\n        this.wp = nodes[0];\n\n        if (callback) callback(this.wp);\n      })\n      .catch((err) => {\n        console.log('[LocalModel::moveToSubject] Fail to fetch data.');\n        console.log(err);\n        if (callback) callback(null);\n      });\n  }\n\n  /*\n\t\t현재 wp가 가리키는 Info를 반환한다.\n\t\t만약 메인 페이지인 경우 null을 반환한다.\n\t*/\n  getCurrentInfo() {\n    return this.wp;\n  }\n\n  /*\n\t\t루트에서 현재 WorkingPointer까지의 경로를\n\t\tString[]으로 반환한다.\n\n\t\tex) [\"컴파일러\", \"LLParser\", \"복잡도\"]\n\t*/\n  getCurrentPath() {\n    if (this.wp == null) {\n      return [];\n    } else {\n      let out = [];\n      let curnode = this.wp;\n      while (curnode != null) {\n        out.push(curnode.names[0]);\n        curnode = curnode.parent;\n      }\n      // reverse 함수는 in-place이다.\n      return out.reverse();\n    }\n  }\n\n  /*\n\t\t현재 부모 Info를 반환한다.\n\t\t만약 부모가 메인 페이지인 경우 null을 반환한다.\n\t*/\n  getParentInfo() {\n    if (this.wp == null) {\n      return null;\n    } else {\n      return this.wp.parent;\n    }\n  }\n\n  /*\n\t\t현재 자식 Info들을 배열로 반환한다.\n\t\t만약 wp가 메인 페이지인 경우 []를 반환한다.\n\t*/\n  getChildInfos() {\n    if (this.wp == null) {\n      return [];\n    } else {\n      return this.wp.childs;\n    }\n  }\n\n  /*\n\t\t현재 wp의 부모로 이동하고\n\t\t그 부모의 Info를 반환한다.\n\n\t\t만약 wp 또는 부모가 메인 페이지인 경우 \n\t\t아무것도 하지 않고 null을 반환한다.\n\t*/\n  moveToParent() {\n    if (this.wp == null || this.wp.parent == null) {\n      return null;\n    } else {\n      return (this.wp = this.wp.parent);\n    }\n  }\n\n  /*\n\t\t현재 wp의 idx번째 자식으로 이동하고\n\t\t그 자식의 Info를 반환한다.\n\n\t\t만약 그런 자식이 없으면\n\t\t아무것도 안하고 null을 반환한다.\n\t\t\n\t\t만약 현재 페이지가 메인 페이지인 경우 \n\t\t아무것도 안하고 null을 반환한다.\n\t*/\n  moveToChild(idx) {\n    console.assert(idx !== undefined);\n    if (this.wp == null) {\n      return null;\n    } else if (this.wp.childs.length <= idx || idx < 0) {\n      return null;\n    } else {\n      return (this.wp = this.wp.childs[idx]);\n    }\n  }\n\n  /*\n\t\t종료하고 메인페이지로 돌아간다.\n\t*/\n  exitToMainPage() {\n    this.wp = null;\n    this.infos = {};\n  }\n\n  /*\n\t\t새 과목을 추가하고 wp를 그 과목으로 이동시킨다.\n\t\t그 과정에서 AJAX 통신이 발생한다.\n\n\t\tdevmode에서는 아무렇게나 ID를 부여한다.\n\n\t\tString   name\n\t\t\t새 과목의 이름\n\n\t\tfunction(wp) callback\n\t\t\t통신이 종료된 뒤 처리해야하는 로직\n\t\t\t인자로 wp Info를 준다.\n\t*/\n  createSubject(name, callback) {\n    if (this.devmode) {\n      let newInfo = this.__allocateInfo(name);\n      newInfo.id = `${new Date().getTime()}`;\n      this.wp = newInfo;\n\n      if (callback)\n        window.setTimeout(() => {\n          callback(this.wp);\n        }, 0);\n      return;\n    }\n\n    // 서버에 주제를 추가하고 id값을 받아온다.\n    // Fake Server인 경우 get으로 바꿔줘야 동작한다.\n    axios({\n      method: 'post',\n      url: this.url + '/createInfo',\n      data: {\n        name: name,\n        parentId: null,\n      },\n    })\n      .then((response) => {\n        // 에러 체크\n        if (!response.data.state) {\n          console.log('[LocalModel::createSubject] Fail to update data.');\n          console.log(response.data.msg);\n          if (callback) callback(null);\n          return;\n        }\n\n        // 새 주제를 추가한다.\n        let newInfo = this.__allocateInfo(name);\n        newInfo.id = response.data.id;\n        this.wp = newInfo;\n\n        if (callback) callback(this.wp);\n      })\n      .catch((err) => {\n        console.log('[LocalModel::createSubject] Fail to fetch data.');\n        console.log(err);\n        if (callback) callback(null);\n      });\n  }\n\n  /*\n\t\t새 하위 주제를 wp에 추가하고 wp를 그 주제로\n\t\t이동시킨다.\n\t\t그 과정에서 AJAX 통신이 발생한다.\n\t\t만약 wp가 null이면 아무것도 하지 않는다.\n\n\t\tString   name\n\t\t\t새 주제의 이름\n\n\t\tfunction(wp) callback\n\t\t\t통신이 종료된 뒤 처리해야하는 로직\n\t\t\t인자로 wp Info를 준다.\n\t*/\n  createInfo(name, callback) {\n    if (this.wp == null) return;\n\n    // 개발모드에서는 아무렇게나 id를 부여한다.\n    if (this.devmode) {\n      let newInfo = this.__allocateInfo(name);\n      this.__appendInfo(this.wp, newInfo);\n      this.wp = newInfo;\n      this.wp.id = `${new Date().getTime()}`;\n\n      if (callback)\n        window.setTimeout(() => {\n          callback(this.wp);\n        }, 0);\n      return;\n    }\n\n    // 서버에 주제를 추가하고 id값을 받아온다.\n    // Fake Server인 경우 get으로 바꿔줘야 동작한다.\n    axios({\n      method: 'post',\n      url: this.url + '/createInfo',\n      data: {\n        name: name,\n        parentId: this.wp.id,\n      },\n    })\n      .then((response) => {\n        // 에러 체크\n        if (!response.data.state) {\n          console.log('[LocalModel::createInfo] Fail to update data.');\n          console.log(response.data.msg);\n          if (callback) callback(null);\n          return;\n        }\n\n        // 새 주제를 추가하고 부모와 연결한다.\n        let newInfo = this.__allocateInfo(name);\n        this.__appendInfo(this.wp, newInfo);\n        this.wp = newInfo;\n        this.wp.id = response.data.id;\n\n        if (callback) callback(this.wp);\n      })\n      .catch((err) => {\n        console.log('[LocalModel::createInfo] Fail to fetch data.');\n        console.log(err);\n        if (callback) callback(null);\n      });\n  }\n\n  /*\n\t\t새 속성을 wp에 추가한다.\n\t\t그 과정에서 AJAX 통신이 발생한다.\n\t\t만약 wp가 null이면 아무것도 하지않는다.\n\n\t\tString prefix\n\t\t\tpinfo의 이름에 대응되는 조사\n\t\t\tex) 사과\"는\" 바보다\n\n\t\tString content\n\t\t\t이 Attr의 내용을 서술하는 구\n\t\t\tex) 사과는 \"바보\"다\n\n\t\tString postfix\n\t\t\tcontent에 대응되는 접미사\n\t\t\t문장부호는 붙이지 않는다.\n\t\t\tex) 사과는 바보\"다\"\n\n\t\tfunction(attr) callback\n\t\t\t통신이 종료된 뒤 처리해야하는 로직\n\t\t\t인자로 생성한 attr을 준다.\n\t*/\n  createAttr(prefix, content, postfix, callback) {\n    if (this.wp == null) return;\n\n    // 개발모드에서는 아무렇게나 ID를 부여한다.\n    if (this.devmode) {\n      let aid = `${new Date().getTime()}`;\n      let attr = this.__appendAttr(this.wp, prefix, content, postfix, aid);\n\n      if (callback)\n        window.setTimeout(() => {\n          callback(attr);\n        }, 0);\n      return;\n    }\n\n    // 서버에 속성을 추가하고 id값을 받아온다.\n    // Fake Server인 경우 get으로 바꿔줘야 동작한다.\n    axios({\n      method: 'post',\n      url: this.url + '/createAttr',\n      data: {\n        prefix: prefix,\n        content: content,\n        postfix: postfix,\n        parentId: this.wp.id,\n      },\n    })\n      .then((response) => {\n        // 에러 체크\n        if (!response.data.state) {\n          console.log('[LocalModel::createAttr] Fail to update data.');\n          console.log(response.data.msg);\n          if (callback) callback(null);\n          return;\n        }\n\n        // 새 주제를 추가하고 부모와 연결한다.\n        let attr = this.__appendAttr(\n          this.wp,\n          prefix,\n          content,\n          postfix,\n          response.data.aid,\n        );\n\n        if (callback) callback(attr);\n      })\n      .catch((err) => {\n        console.log('[LocalModel::createAttr] Fail to fetch data.');\n        console.log(err);\n        if (callback) callback(null);\n      });\n  }\n\n  /*\n\t\t현재 위치를 소재로 n개의 문제를 가진 모의고사를 만들어\n\t\t반환한다.\n\n\t\t어지간하면 안터지는데, 특이케이스(모든 지식의 속성이 0개인 경우)\n\t\t에는 터질 수도 있어서 try catch문 사용 요망...\n\t*/\n  createMocktest(n) {\n    return Mocktest.create_mocktest(this.wp, n);\n  }\n\n  /*\n\t\tDANGER ZONE\n\t*/\n  __allocateInfo(name) {\n    let newInfo = new Info([name], []);\n    this.infos[newInfo.jsid] = newInfo;\n    return newInfo;\n  }\n\n  __appendInfo(parent, child) {\n    parent.childs.push(child);\n    child.parent = parent;\n  }\n\n  __appendAttr(info, prefix, content, postfix, aid) {\n    let newAttr = new Attr(info, prefix, content, postfix);\n    newAttr.id = aid;\n    info.attrs.push(newAttr);\n    return newAttr;\n  }\n}\n\nmodule.exports = LocalModel;\n\nexport default LocalModel;\n","/*\n\tAttr 클래스는 Info의 속성, 문장을 매끄럽게\n\t나타낼 수 있는 조사 및 어미를 저장다.\n*/\nclass Attr {\n\t/*\n\t\tLocalModel에서 새로운 주제/속성 생성\n\t\t인터페이스를 제공하므로, 외부 사용자는\n\t\t이 생성자를 사용하지 말 것\n\n\t\tInfo pinfo\n\t\t\t이 Attr을 소유하는 Info\n\t\t\t\n\t\tString prefix\n\t\t\tpinfo의 이름에 대응되는 조사\n\t\t\tex) 사과\"는\" 바보다\n\n\t\tString content\n\t\t\t이 Attr의 내용을 서술하는 구\n\t\t\tex) 사과는 \"바보\"다\n\n\t\tString postfix\n\t\t\tcontent에 대응되는 접미사\n\t\t\t문장부호는 붙이지 않는다.\n\t\t\tex) 사과는 바보\"다\"\n\t*/\n\tconstructor(pinfo, prefix, content, postfix) {\n\t\tconsole.assert(pinfo != null);\n\t\tconsole.assert(typeof(prefix) == 'string');\n\t\tconsole.assert(typeof(content) == 'string');\n\t\tconsole.assert(typeof(postfix) == 'string');\n\n\t\tthis.pinfo = pinfo;\n\t\tthis.prefix = prefix;\n\t\tthis.content = content;\n\t\tthis.postfix = postfix;\n\t\tthis.id = null;\n\t}\n\n\t/*\n\t\t이 속성을 완전히 설명하는 문장을 반환한다.\n\t\t이때 문장의 마지막에 부호를 붙인다.\n\t\tex) \"사과는 바보다.\"\n\n\t\tInteger nidx (Optional)\n\t\t\t부모의 이름 중 몇 번째를 가져올지 결정한다.\n\t\t\t생략되면 0으로 간주한다.\n\t*/\n\tgetFullSentence(nidx) {\n\t\tnidx = nidx ? nidx : 0;\n\t\treturn this.pinfo.names[nidx]\n\t\t\t+ this.prefix + ' '\n\t\t\t+ this.content + this.postfix + '.';\n\t}\n\n\t/*\n\t\t주어를 제외한 문장을 반환한다.\n\t\tex) \"는 바보다.\"\n\t*/\n\tgetHintSentence(josa) {\n\t\treturn (josa ? this.prefix + ' ' : '') + this.content + this.postfix + '.';\n\t}\n};\n\nmodule.exports = Attr;","const Info = require('./info');\nconst Traveler = require('./traveler');\nconst Quest = require('./quest');\nconst Util = require('./util');\n\n/*\n\t외부 사용법\n\n\tlet domains = 선택한 과목/폴더/필기에 해당하는 Info의 배열\n\tlet mocktest = Mocktest.create_mocktest(domains, 문제수)\n\tmocktest.quests.forEach(q => {\n\t\tif(!q)\n\t\t\treturn;\n\n\t\t// DOM에 q를 렌더링하기\n\t})\n\n\t가끔 버그로 문제 생성 실패할 때가 있는데 그 문제(quest)는 NULL로\n\t채워진다. 나중에 버그 수정할 예정이니 NULL 대응 부탁 바람\n*/\n\n// 절대 외부에서 이 클래스를 직접 인스턴스화하지 마시오\nclass Mocktest {\n\tconstructor(quests) {\n\t\tconsole.assert(quests instanceof Array);\n\t\tthis.quests = quests;\n\t}\n}\n\n// root를 루트로 갖는 서브트리에서 n개의 문제를 출제한다.\n// 최대한 비슷한 수의 문제가 출제되도록 하되\n// 정확하게 나누어 떨어지지 않는 경우엔 균등\n// 분포로 무작위로 고른다.\nMocktest.select_test_materials = function(root, n) {\n\t// 안전장치\n\tif(n <= 0)\n\t\treturn [];\n\n\t// 재료를 찾는다.\n\t// let subinfos = Soup.fetch_subinfos(roots).filter(info => {\n\t// \treturn info.attrs.length > 0 && roots.indexOf(info) == -1;\n\t// });\n\tlet subinfos = [];\n\tTraveler.forEachPre(root, (info) => {\n\t\tif (info.attrs.length > 0)\n\t\t\tsubinfos.push(info);\n\t});\n\n\n\t// 초기화\n\tlet ratio = [];\n\tlet m = subinfos.length;\n\tlet quotient = Math.floor(n / m);\n\tfor(let i = 0; i < m; ++i)\n\t\tratio[i] = quotient;\n\tn -= quotient * m;\n\t\n\t// 나머지는 랜덤분배\n\tif(n > 0) {\n\t\tUtil.random_choices(0, m - 1, n).forEach(idx => {\n\t\t\tratio[idx] += 1;\n\t\t});\n\t}\n\n\t// 분배된 만큼 지식을 리스트로 나열한다.\n\t// ex) [1번지식, 1번지식, 4번지식, 9번지식 ...]\n\tlet out = [];\n\tfor(let i = 0; i < ratio.length; ++i)\n\t\tfor(let k = 0; k < ratio[i]; ++k)\n\t\t\tout.push(subinfos[i]);\n\n\t// 순서를 적절히 섞는다.\n\t// 2번째 인자는 outplace = false\n\treturn Util.shuffle(out, false);\n}\n\n// Info \troots \t문제 출제 범위\n// Number \tn \t\t문제 출제 수\nMocktest.create_mocktest = function(root, n) {\n\t// 문제 출제 범위 생성\n\tlet domains = Mocktest.select_test_materials(root, n);\n\t\n\tlet quest_types = [];\n\n\t// 4문제보다 적은 경우 그냥 n-1번째 유형까지만 만든다.\n\tif (n < 4) {\n\t\tfor (let k = 0; k < n; ++k)\n\t\t\tquest_types[k] = 1;\n\t}\n\telse {\n\t\tquest_types[0] = Math.floor(n / 4.0);\n\t\tquest_types[1] = Math.floor(n / 4.0);\n\t\tquest_types[2] = Math.floor(n / 4.0);\n\t\tquest_types[3] = n \n\t\t\t- quest_types[0]\n\t\t\t- quest_types[1]\n\t\t\t- quest_types[2];\n\t}\n\n\t// 각 유형별로 문제를 만든다.\n\tlet quests = [];\n\tlet type_ptr = 0;\n\tfor(let k = 0; k < n; ++k) {\n\t\t// 현재 유형을 다 만들면 다음 유형으로 넘어간다.\n\t\tif(quest_types[type_ptr]-- <= 0) {\n\t\t\t++type_ptr;\n\t\t\t--k;\n\t\t\tcontinue;\n\t\t}\n\t\tconsole.assert(type_ptr < quest_types.length);\n\n\t\t// 각 유형에 맞는 문제를 만든다.\n\t\tlet new_quest = null;\n\t\tif(type_ptr == 0) {\n\t\t\tnew_quest = Quest.generate_binary_quest(domains[k]);\n\t\t}\n\t\telse if(type_ptr == 2) {\n\t\t\tnew_quest = Quest.generate_short_quest(domains[k], 4);\n\t\t}\n\t\telse {\n\t\t\t// 4지선다형은 루트를 소재로 할 수 없기 때문에\n\t\t\t// 만약 루트가 걸릴 경우 1. 자식 중 아무나 선택\n\t\t\t// 2. 자식이 없으면 다른 유형으로 변경 한다.\n\t\t\tif (domains[k].parent == null) {\n\t\t\t\tif (domains[k].childs.length > 0) {\n\t\t\t\t\tlet feasible = domains[k].childs.filter(child => {\n\t\t\t\t\t\treturn child.attrs.length >= 1;\n\t\t\t\t\t});\n\n\t\t\t\t\t// 자식으로 쓸만한 애가 없으면 그냥 다른 유형으로 만든다\n\t\t\t\t\tif (feasible.length == 0) {\n\t\t\t\t\t\tif (Math.random() > 0.5)\n\t\t\t\t\t\t\tnew_quest = Quest.generate_binary_quest(domains[k]);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tnew_quest = Quest.generate_short_quest(domains[k], 4);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdomains[k] = Util.get_randomly(feasible);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (Math.random() > 0.5)\n\t\t\t\t\t\tnew_quest = Quest.generate_binary_quest(domains[k]);\n\t\t\t\t\telse\n\t\t\t\t\t\tnew_quest = Quest.generate_short_quest(domains[k], 4);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// 예외 생성이 아닌 경우, 정상적으로 문제를 만든다.\n\t\t\tif (new_quest == null) {\n\t\t\t\tif(type_ptr == 1) {\n\t\t\t\t\t// 옳지 않은 것을 고를 때는 최소한 올바른 속성이 3개 이상 있어야만\n\t\t\t\t\t// 에러가 나지 않는다.\n\t\t\t\t\tlet invert = domains[k].attrs.length >= 3 && Math.random() > 0.5;\n\t\t\t\t\tnew_quest = Quest.generate_selection_quest(domains[k], 4, 1, invert);\n\t\t\t\t}\n\t\t\t\telse if(type_ptr == 3) {\n\t\t\t\t\tnew_quest = Quest.generate_selection2_quest(domains[k], 4);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tquests.push(new_quest);\n\t}\n\n\treturn new Mocktest(quests);\n}\n\nmodule.exports = Mocktest;","const Info = require('./info');\nconst Traveler = require('./traveler');\nconst Util = require('./util');\nconst Queue = require('./queue');\n\n/*\n\tQuest 쓰는 방법\n\n\t1. 문제 만들기\n\tlet quest = Quest.{만들고 싶은 문제에 해당하는 생성 함수}([인자])\n\tquest.statement\t// 지문\n\tquest.choices\t// 선택지로 보여줄 문자열 집합\n\tquest.answers\t// 정답\n\n\t2. 문제 매기기\n\tboolean Quest.evaluate(quest, response)\n\n\t3. 참/거짓 문제\n\tQuest Quest.generate_binary_quest(Info g);\n\n\t참/거짓 문제의 response는 ['T'] 또는 ['F'] 여야 한다.\n\t\n\t4. n지선다 문제\n\tQuest Quest.generate_selection_quest(Info g, int n, int a, boolean inv)\n\t\tn: 선택지 수\n\t\ta: 골라야 하는 답의 수\n\t\tinv: 참이면 '옳지 않은 것', 거짓이면 '옳은 것'\n\n\tn지선다 문제의 response는 ['0', '3', ...], 즉 음이 아닌 정수를 나타낸\n\t문자열의 집합이어야 한다.\n\n\t5. 단답형 문제\n\tQuest Quest.generate_short_quest(Info g, int n);\n\t\tn: 주어지는 정보 수\n\n\t6. n지선다 문제 Attr to Name형\n\tQuest Quest.generate_selection2_quest(Info g, int n, int a)\n\t\tn: 선택지 수\n\t\ta: 골라야 하는 답의 수\n\n\t이 이외의 함수는 건드렸을 때 책임 안짐\n*/\n\nclass Quest {\n  /*\n\t\ttype은 {'binary', 'selection', 'short'} 중 하나일 것\n\t*/\n  constructor(type, title, statement, choices, answers, materials) {\n    console.assert(type);\n    console.assert(title);\n    console.assert(Array.isArray(choices));\n    console.assert(Array.isArray(answers));\n    if (!Array.isArray(answers)) {\n      console.log('babo');\n      console.log(answers);\n    }\n    this.type = type;\n    this.title = title;\n    this.statement = statement;\n    this.choices = choices;\n    this.answers = answers;\n    this.materials = materials;\n  }\n}\n\nQuest.evaluate = function(quest, response) {\n  return Quest.evaluator[quest.type](quest, response);\n};\n\nQuest.evaluator = {};\n\n// 참/거짓 유형 문제 생성\nQuest.generate_binary_quest = function(material) {\n  let ans = null;\n  let fact = null;\n\n  // 부모가 없음, 즉 루트인 경우 부정명제를 가져올 수 없다.\n  // 따라서 이 경우 항상 참인 명제만 선택하게 한다.\n  if (material.parent != null && Math.random() > 0.5) {\n    ans = 'F';\n    //if(Math.random() > 0.5)\n    // \tfact = Soup.select_negative_attrs(material, 1);\n    // else\n    // \tfact = Soup.mutate_attr(Soup.select_positive_attr(material));\n    fact =\n      material.names[0] +\n      Traveler.selectNegativeAttrs(material, 1)[0].getHintSentence(true);\n  } else {\n    ans = 'T';\n    fact = Traveler.selectPositiveAttrs(material, 1)[0].getFullSentence();\n  }\n\n  let name = Util.get_randomly(material.names);\n  return new Quest(\n    'binary',\n    '다음 문장의 참/거짓을 판별하시오.',\n    fact,\n    ['T', 'F'],\n    [ans],\n    material,\n  );\n};\n\n// 참거짓 채점기\n// 답을 맞춰야 함\n// Info g\nQuest.evaluator['binary'] = function(quest, response) {\n  if (response.length != 1) return false;\n  else return quest.answers[0] == response[0];\n};\n\n// n지선다 유형 문제 생성\n// material은 반드시 root가 아니어야 한다. root면 무조건 에러난다.\n// 문제 생성에 실패할 경우 에러가 발생한다.\n//\n// material의 속성의 수는 a (inv가 true이면 n - a)개 이상이어야 한다.\n// material: 문제를 출제할 지식\n// n: 선택지의 수\n// a: 정답의 수\n// inv: 옳은/옳지 않은\nQuest.generate_selection_quest = function(material, n, a, inv) {\n  let p = inv ? n - a : a;\n\n  // 정답 선택지 만들기\n  let pos = Traveler.selectPositiveAttrs(material, p);\n\n  // 오답 선택지 만들기\n  let neg = Traveler.selectNegativeAttrs(material, n - p);\n\n  // 선택지 만들기\n  // 일단 정답부터 만들고, attr 개체를 string으로 변환한다.\n  // 섞고, pos가 있는 위치들을 찾고, pos와 neg를 문장으로 변환.\n  let choices = Util.shuffle(pos.concat(neg), false);\n  let answers = null;\n  if (inv)\n    answers = neg.map((attr) => {\n      return `${choices.indexOf(attr)}`;\n    });\n  else\n    answers = pos.map((attr) => {\n      return `${choices.indexOf(attr)}`;\n    });\n  let name = Util.get_randomly(material.names);\n  choices = choices.map((attr) => {\n    return attr.getHintSentence(false);\n  });\n\n  // 표현\n  let logic_label = inv ? '옳지 않은 것' : '옳은 것';\n  return new Quest(\n    'selection',\n    `다음 중 ${name}에 대한 설명으로 ${logic_label}을 고르시오.`,\n    null,\n    choices,\n    answers,\n    material,\n  );\n};\n\n// n지선다 채점기\n// 답을 모두 맞춰야 함\nQuest.evaluator['selection'] = function(quest, response) {\n  if (quest.answers.length != response.length) return false;\n  quest.answers.sort();\n  response.sort();\n  for (let i = 0; i < response.length; ++i)\n    if (quest.answers[i] != response[i]) return false;\n  return true;\n};\n\n// 단답식 유형 문제 생성\nQuest.generate_short_quest = function(material, n) {\n  // 속성이 n개보다 적을 경우, n을 조절해줘서 util.js가\n  // 뻑나지 않도록 한다.\n  if (material.attrs.length < n) n = material.attrs.length;\n  let attrs = Traveler.selectPositiveAttrs(material, n);\n  let title = '다음이 설명하는 것을 적으시오.';\n  let stmt = '';\n  attrs.forEach((attr) => {\n    stmt += '\\n * ' + attr.getHintSentence(false);\n  });\n  return new Quest('short', title, stmt, [], material.names, material);\n};\n\n// 단답식 채점기\n// 답 중 하나만 맞추면 됨\nQuest.evaluator['short'] = function(quest, response) {\n  if (response.length != 1) return false;\n  for (let i = 0; i < quest.answers.length; ++i)\n    if (quest.answers[i] == response[i]) return true;\n  return false;\n};\n\n// n지선다 유형 II 문제 생성\n// 속성을 주고 이름을 고르는 것\n// material은 반드시 root가 아니어야 한다. root면 무조건 에러난다.\n// 문제 생성에 실패할 경우 에러가 발생한다.\n//\n// 그래프에 n개 이상의 지식이 존재해야 한다.\n// material: 문제를 출제할 지식\n// n: 선택지의 수\nQuest.generate_selection2_quest = function(material, n) {\n  // 다른 지식의 이름을 가져올 범위를 찾는다.\n  let g = material;\n  let q = new Queue();\n\n  // 정답 선택지 만들기\n  let pos = material;\n\n  let title = '다음이 설명하는 것으로 알맞은 것을 고르시오.';\n  let stmt = '';\n  pos.attrs.forEach((attr) => {\n    stmt += '\\n * ' + attr.getHintSentence(false);\n  });\n\n  // 오답 선택지 찾기\n  let neg_infos = Traveler.selectNegativeInfos(material);\n\n  // 선택지 합치기\n  neg_infos.push(pos);\n  neg_infos = neg_infos.slice(0, n);\n  Util.shuffle(neg_infos, false);\n  let choices = neg_infos.map((info) => {\n    return Util.get_randomly(info.names);\n  });\n  let answers = [`${neg_infos.indexOf(material)}`];\n\n  // 표현\n  return new Quest('selection', title, stmt, choices, answers, material);\n};\n\nmodule.exports = Quest;\n","class Queue {\n\tconstructor() {\n\t\tthis.first = null;\n\t\tthis.last = null;\n\t\tthis.size = 0;\n\t}\n\n\tpush(value) {\n\t\tif(this.first == null) {\n\t\t\tthis.first = this.last = {\n\t\t\t\tvalue,\n\t\t\t\tnext: null\n\t\t\t};\n\t\t}\n\t\telse {\n\t\t\tthis.last = this.last.next = {\n\t\t\t\tvalue,\n\t\t\t\tnext: null\n\t\t\t};\n\t\t}\n\t\t++this.size;\n\t\treturn value;\n\t}\n\n\tpop() {\n\t\tif(!this.first)\n\t\t\treturn null;\n\t\tlet out = this.first.value;\n\t\tthis.first = this.first.next;\n\t\tif(this.first == null)\n\t\t\tthis.last = null;\n\t\t--this.size;\n\t\treturn out;\n\t}\n\n\tfront() {\n\t\tif(this.empty())\n\t\t\treturn null;\n\t\treturn this.first.value;\n\t}\n\n\tback() {\n\t\tif(this.empty())\n\t\t\treturn null;\n\t\treturn this.last.value;\n\t}\n\n\tempty() {\n\t\treturn this.first == null;\n\t}\n};\n\nmodule.exports = Queue;","import React, { createContext, Dispatch, useReducer, useContext } from 'react';\nconst LocalModelCN = require('../libs/localmodel');\n\nexport interface Attr {\n  pinfo: Info;\n  prefix: string;\n  content: string;\n  postfix: string;\n  id: string | number;\n  getFullSentence: Function;\n}\n\nexport interface Info {\n  names: string[];\n  attrs: Attr[];\n  comment: string;\n  parent: null | Info;\n  childs: Info[];\n  id: string | number;\n  jsid: string | number;\n}\n\nexport interface MyLocalModel {\n  LocalModel: any;\n  currentPath: string[];\n  subjects: { name: string; id: number }[];\n  info: Info | null; // 진입한 current info\n}\n\nconst LocalModelContext = createContext<MyLocalModel | null>(null);\n\ntype Action =\n  | {\n      type: 'INIT';\n      LocalModel: any;\n    }\n  | {\n      type: 'CHANGE_PATH';\n      path: string[];\n    }\n  | {\n      type: 'CHANGE_SUBJECTS';\n      subjects: { name: string; id: number }[];\n    }\n  | {\n      type: 'CHANGE_INFO';\n      info: any | Info; // any는 고육지책. 좀 더 조일 필요 있음.\n    };\n\ntype LocalModelDispatch = Dispatch<Action>;\n\nconst LocalModelDispatchContext = createContext<LocalModelDispatch | null>(\n  null,\n);\n\nfunction LocalModelReducer(state: MyLocalModel, action: Action): MyLocalModel {\n  switch (action.type) {\n    case 'INIT':\n      return {\n        ...state,\n        LocalModel: action.LocalModel,\n      };\n    case 'CHANGE_PATH':\n      return {\n        ...state,\n        currentPath: action.path,\n      };\n    case 'CHANGE_SUBJECTS':\n      return {\n        ...state,\n        subjects: action.subjects,\n      };\n    case 'CHANGE_INFO':\n      return {\n        ...state,\n        info: action.info,\n      };\n    default:\n      throw new Error('Unhandled action');\n  }\n}\n\nconst is_remote: boolean = true;\nconst LocalModel = new LocalModelCN(!is_remote);\n\n////\ndeclare global {\n  interface Window {\n    LocalModel: any;\n  }\n}\nwindow.LocalModel = LocalModel; // 디버깅을 위해 window에 LocalModel 주입\n////\n\nexport function MyLocalModelContextProvider({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  const [localModel, dispatch] = useReducer(LocalModelReducer, {\n    LocalModel: LocalModel,\n    currentPath: [],\n    subjects: [],\n    info: null,\n  });\n\n  return (\n    <LocalModelDispatchContext.Provider value={dispatch}>\n      <LocalModelContext.Provider value={localModel}>\n        {children}\n      </LocalModelContext.Provider>\n    </LocalModelDispatchContext.Provider>\n  );\n}\n\nexport function useMyLocalModel() {\n  const state = useContext(LocalModelContext);\n  if (!state) throw new Error('LocalModelProvider not found');\n  return state;\n}\n\nexport function useMyLocalModelDispatch() {\n  const dispatch = useContext(LocalModelDispatchContext);\n  if (!dispatch) throw new Error('LocalModelProvider not found');\n  return dispatch;\n}\n","import React, { useCallback } from 'react';\nimport styled from 'styled-components';\nimport {\n  useMyLocalModel,\n  useMyLocalModelDispatch,\n} from '../contexts/MyLocalModel';\n\n// vscode-styled-components 모듈 설치로 문자열화 방지.\n\nconst GnbWrapper = styled.div`\n  width: 100%;\n  height: 40px;\n  background-color: rgb(190, 0, 4);\n  display: flex;\n  align-items: center;\n  padding: 8px;\n  color: white;\n  box-sizing: border-box;\n  & > div:first-child {\n    flex: 1;\n  }\n`;\n\nfunction Gnb() {\n  const MyLocalModel = useMyLocalModel();\n  const dispatch = useMyLocalModelDispatch();\n  const handleExitToMainPageButton = useCallback(\n    (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\n      MyLocalModel.LocalModel.exitToMainPage();\n      dispatch({ type: 'CHANGE_PATH', path: [] });\n    },\n    [dispatch, MyLocalModel],\n  );\n  const handleGoToUpperPageButton = useCallback(\n    (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\n      var info = MyLocalModel.LocalModel.moveToParent();\n      dispatch({\n        type: 'CHANGE_PATH',\n        path: MyLocalModel.LocalModel.getCurrentPath(),\n      });\n      dispatch({ type: 'CHANGE_INFO', info });\n    },\n    [dispatch, MyLocalModel],\n  );\n  return (\n    <GnbWrapper>\n      <div>\n        {MyLocalModel.currentPath.reduce((prev, curr) => {\n          return prev.concat(' > ').concat(curr);\n        }, '> 내 주제 ')}\n      </div>\n      <div>\n        {MyLocalModel.currentPath.length >= 2 && (\n          <button onClick={handleGoToUpperPageButton}>상위 정보</button>\n        )}\n      </div>\n      <div>\n        {MyLocalModel.currentPath.length !== 0 && (\n          <button onClick={handleExitToMainPageButton}>내 주제</button>\n        )}\n      </div>\n    </GnbWrapper>\n  );\n}\n\nexport default Gnb;\n","import React, { useState, useCallback, useRef } from 'react';\nimport Modal from 'react-modal';\nimport styled from 'styled-components';\n\nimport {\n  useMyLocalModel,\n  useMyLocalModelDispatch,\n  Attr as AttrType,\n  // Info as InfoType,\n} from '../contexts/MyLocalModel';\n\nconst customStyles = {\n  overlay: {\n    backgroundColor: 'rgba(0, 0, 0, 0.75)',\n  },\n  content: {\n    padding: '8px',\n    width: '100%',\n    minwidth: '370px',\n    maxWidth: '600px',\n    border: 'none',\n    borderRadius: 0,\n    top: '50%',\n    left: '50%',\n    right: 'auto',\n    bottom: 'auto',\n    marginRight: '-50%',\n    transform: 'translate(-50%, -50%)',\n    boxSizing: 'border-box',\n  } as React.CSSProperties, // 이렇게 안하면 이상한 타입 에러 뜬다 https://stackoverflow.com/questions/46710747/type-string-is-not-assignable-to-type-inherit-initial-unset-fixe\n};\n\n// react에서 styled components 사용시 input tag에서 focus를 잃어버리는 문제\n//https://velog.io/@cjy9306/react%EC%97%90%EC%84%9C-styled-components-%EC%82%AC%EC%9A%A9%EC%8B%9C-input-tag%EC%97%90%EC%84%9C-focus%EB%A5%BC-%EC%9E%83%EC%96%B4%EB%B2%84%EB%A6%AC%EB%8A%94-%EB%AC%B8%EC%A0%9C\n\nModal.setAppElement('#root');\n\nconst ModalContents = styled.div`\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst SelBox = styled.ul`\n  list-style: none;\n  padding: 0;\n  display: flex;\n`;\nconst SelElem = styled.li`\n  display: inline-block;\n  flex: 1;\n  & > button {\n    border: none;\n    text-align: center;\n    width: 100%;\n    height: 40px;\n    box-sizing: border-box;\n    font-size: 0.7em;\n  }\n`;\n\nconst ImportantButtonWrapper = styled.div`\n  display: flex;\n  height: 55px;\n  & > button {\n    border: none;\n    text-align: center;\n  }\n  & > button:nth-child(1) {\n    flex: 1;\n    color: black;\n  }\n  & > button:nth-child(2) {\n    flex: 1;\n    font-weight: bold;\n    background-color: rgb(24, 109, 238);\n    color: white;\n  }\n  & > button:disabled {\n    font-weight: normal;\n    background-color: rgba(24, 109, 238, 0.5);\n  }\n`;\n\nconst Preview = styled.div`\n  font-size: 2em;\n  font-weight: bold;\n  word-break: break-all;\n`;\n\nconst InputBox = styled.div`\n  & > input[type='text'] {\n    width: 100%;\n  }\n`;\n\nconst SelButton = styled.button`\n  background-color: ${(props: { selected?: boolean }) =>\n    props.selected ? 'rgb(187,188,244)' : '#eeeeee'};\n`;\n\n// [출처] [자바스크립트] 한글 받침 구별 함수\n// https://blog.naver.com/azure0777/221414175631\nfunction checkBatchimEnding(word: string) {\n  if (word.length === 0) return false;\n  var lastLetter = word[word.length - 1];\n  var uni = lastLetter.charCodeAt(0);\n\n  if (uni < 44032 || uni > 55203) return false;\n\n  return (uni - 44032) % 28 !== 0;\n}\n\nfunction makeSentence(\n  name: string,\n  prefixes: string[],\n  content: string,\n  postfixes: string[],\n): string {\n  var string = name;\n  if (checkBatchimEnding(name)) {\n    string += prefixes[0];\n  } else {\n    string += prefixes[1];\n  }\n  string += ' ';\n  if (content.trim().length === 0) {\n    string += '???';\n  } else {\n    string += content;\n  }\n  if (checkBatchimEnding(content)) {\n    string += postfixes[0];\n  } else {\n    string += postfixes[1];\n  }\n  return string + '.';\n}\n\nfunction AttrModal({ name }: { name: string[] }) {\n  const dispatch = useMyLocalModelDispatch(); // 마이모델컨텍스트\n  const { LocalModel } = useMyLocalModel();\n  const contentInputRef = useRef() as React.MutableRefObject<HTMLInputElement>;\n  const [modalIsOpen, setIsOpen] = React.useState(false);\n  const [prefix, setPrefix] = useState(0);\n  const [postfix, setPostfix] = useState(0);\n  const [content, setContent] = useState('');\n  // const [past, togglePast] = useState(false);\n  // const [neg, toggleNeg] = useState(false);\n  const [preview, setPreview] = useState('');\n  const [isBatchimContent, setIsBatchimContent] = useState(false);\n  function openModal() {\n    setIsOpen(true);\n    const body: HTMLElement = document.body;\n    body.style.position = 'fixed'; // 뒤에 내용이 움직이는 걸 방지해 준다. (나중엔 App 영역으로 한정지어 줘야함 . 모달조차 스크롤이 필요할 때를 대비)\n  }\n\n  function closeModal() {\n    setIsOpen(false);\n    setPrefix(0);\n    setPostfix(0);\n    setContent('');\n    // togglePast(false);\n    // toggleNeg(false);\n    setPreview('');\n    setIsBatchimContent(false);\n    const body: HTMLElement = document.body;\n    body.style.position = ''; // lock 해제\n  }\n\n  function afterOpenModal() {\n    // 열리고 난 뒤 수행되는 액션을 정의\n    setPreview(\n      makeSentence(name[0], prefixList[prefix], content, postfixList[postfix]),\n    );\n    contentInputRef.current.focus();\n  }\n\n  function afterCloseModal() {\n    // 닫은 뒤 수행되는 액션을 정의.\n    // (closeModal)에서 많은 상태변화를 일으켜야 렌더링 횟수가 줄어드므로 쓸 일 없을듯?\n  }\n\n  const isBatchimName = checkBatchimEnding(name[0]);\n  const prefixList = [\n    ['은', '는'],\n    ['으로', '로'],\n    ['에는', '에는'],\n  ];\n  const postfixList = [\n    ['이다', '다'],\n    ['하다', '하다'],\n    ['된다', '된다'],\n    ['있다', '있다'],\n    ['다', '다'], // 동사형\n  ];\n  const handleMdoalBodyClick = useCallback(\n    (e) => {\n      contentInputRef.current.focus();\n    },\n    [contentInputRef],\n  );\n  const handlePrefixClick = useCallback(\n    (idx: number) => (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\n      setPrefix(idx);\n      // contentInputRef.current.focus(); => 이벤트 버블링 덕분에 필요 없다.\n      setPreview(\n        makeSentence(name[0], prefixList[idx], content, postfixList[postfix]),\n      );\n    },\n    [name, postfixList, prefixList, content, postfix],\n  );\n  const handlePostfixClick = useCallback(\n    (idx: number) => (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\n      setPostfix(idx);\n      // contentInputRef.current.focus(); => 이벤트 버블링 덕분에 필요 없다.\n      setPreview(\n        makeSentence(name[0], prefixList[prefix], content, postfixList[idx]),\n      );\n    },\n    [content, prefix, name, postfixList, prefixList],\n  );\n  const handleChangeContent = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      setContent(e.target.value);\n      setIsBatchimContent(checkBatchimEnding(e.target.value));\n      setPreview(\n        makeSentence(\n          name[0],\n          prefixList[prefix],\n          e.target.value,\n          postfixList[postfix],\n        ),\n      );\n    },\n    [prefix, postfix, name, postfixList, prefixList],\n  );\n\n  const commitAttrHandler = useCallback(\n    (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\n      const createAttrCallBackHandler = (attr: AttrType) => {\n        if (attr !== null) {\n          // attr이 실질적으론 안쓰이는거 같은데.\n          dispatch({ type: 'CHANGE_INFO', info: LocalModel.getCurrentInfo() });\n          // 여기에 인포 수 변화에 수반되는 문제풀기버튼 활성화를 추가해야 한다. 근데 하위 컴포넌트임.\n          closeModal();\n        } else {\n          alert('server error');\n        }\n      };\n      const prefixDecider = checkBatchimEnding(name[0]) ? 0 : 1;\n      const postfixDecider = checkBatchimEnding(content) ? 0 : 1;\n      LocalModel.createAttr(\n        prefixList[prefix][prefixDecider],\n        content,\n        postfixList[postfix][postfixDecider],\n        createAttrCallBackHandler,\n      );\n    },\n    [\n      LocalModel,\n      content,\n      postfixList,\n      prefixList,\n      prefix,\n      postfix,\n      name,\n      dispatch,\n    ],\n  );\n  return (\n    <React.Fragment>\n      <button onClick={openModal}>속성 추가</button>\n      <Modal\n        closeTimeoutMS={200}\n        isOpen={modalIsOpen}\n        onRequestClose={closeModal}\n        style={customStyles}\n        contentLabel=\"AttrModal\"\n        onAfterClose={afterCloseModal}\n        shouldCloseOnOverlayClick={false}\n        onAfterOpen={afterOpenModal}\n      >\n        {/* <h2 ref={(_subtitle) => (subtitle = _subtitle)}>Hello</h2> */}\n        <ModalContents onClick={handleMdoalBodyClick}>\n          <Preview>{preview}</Preview>\n          <SelBox>\n            {prefixList.map((x, i) => {\n              return (\n                <SelElem key={'prefix-' + i}>\n                  <SelButton\n                    onClick={handlePrefixClick(i)}\n                    selected={prefix === i}\n                  >\n                    {isBatchimName ? x[0] : x[1]}\n                    {/* {prefix === i && ' ✔'} */}\n                  </SelButton>\n                </SelElem>\n              );\n            })}\n          </SelBox>\n          <InputBox>\n            <input\n              type=\"text\"\n              placeholder=\"콘텐츠 입력\"\n              ref={contentInputRef}\n              value={content}\n              onChange={handleChangeContent}\n            />\n          </InputBox>\n          <SelBox>\n            {postfixList.map((x, i) => {\n              return (\n                <SelElem key={'postfix-' + i}>\n                  <SelButton\n                    onClick={handlePostfixClick(i)}\n                    selected={postfix === i}\n                  >\n                    {isBatchimContent ? x[0] : x[1]}\n                    {i === 0 && '(명사형)'}\n                    {i === 4 && '(동사형)'}\n                    {/* {postfix === i && ' ✔'} */}\n                  </SelButton>\n                </SelElem>\n              );\n            })}\n          </SelBox>\n          {/* <SelBox>\n            <SelElem>\n              <SelButton>과거형</SelButton>\n            </SelElem>\n            <SelElem>\n              <SelButton>부정형</SelButton>\n            </SelElem>\n          </SelBox> */}\n          <ImportantButtonWrapper>\n            <button onClick={closeModal}>닫기</button>\n            <button\n              onClick={commitAttrHandler}\n              disabled={!content.trim().length}\n            >\n              저장\n            </button>\n          </ImportantButtonWrapper>\n        </ModalContents>\n      </Modal>\n    </React.Fragment>\n  );\n}\n\nexport default AttrModal;\n","import React, { useState, useCallback, useMemo } from 'react';\nimport styled from 'styled-components';\nimport { Quest as QuestType } from './MockTest';\n\n// style //\n\nconst QuestElem = styled.li`\n  display: flex;\n  flex-direction: column;\n  word-break: break-all;\n  padding: 0 1.5em;\n  & + & {\n    margin-top: 3em;\n  }\n`;\n\nconst Statement = styled.div`\n  display: ${(props: { statement?: string | null }) =>\n    props.statement ? 'block' : 'none'};\n  border: 1px solid black;\n  margin-top: 1em;\n  padding: 1em;\n`;\n\nconst Selection = styled.div`\n  & > label {\n    /* padding-left: 0.7em; */\n    /* flex: 1; */\n    width: 100%;\n    height: 100%;\n    padding: 1em;\n  }\n  /* & > label:hover,\n  label:active {\n    background-color: rgb(111, 197, 237);\n  } */\n  & > label > span {\n    padding-left: 0.7em;\n  }\n  & > label > input[type='radio'] {\n    /* position: absolute; */\n    /* left: -9999px; */\n  }\n  display: flex;\n\n  background-color: ${(props: { selected?: boolean }) =>\n    props.selected ? 'wheat' : 'rgb(235,235,235)'};\n  margin-top: 1em;\n`;\n\nconst InputAnswer = styled.div`\n  width: 100%;\n  margin-top: 1em;\n  & > input[type='text'] {\n    width: 100%;\n    padding: 0;\n    border-width: 0;\n    box-sizing: border-box;\n    border: 1px solid black;\n    padding: 1em;\n  }\n`;\n\n//       //\n\nfunction QuestComp({\n  quest,\n  order,\n  setSelectionFn,\n  selection,\n}: {\n  quest: QuestType;\n  order: number;\n  setSelectionFn: Function;\n  selection: (string | null)[];\n}) {\n  // console.log('render questcomp');\n  const setValueAsync = (value: string) => {\n    var newArr = selection.slice();\n    newArr[order] = value;\n    setSelectionFn(newArr);\n  };\n  const { type, title, statement, choices, answers, materials } = quest;\n  const onChange2 = useCallback(\n    (value: string) => (e: React.ChangeEvent<HTMLInputElement>) => {\n      // console.log('passed to change evt'); // only once\n      setValueAsync(value);\n    },\n    [selection],\n  );\n  const onClick2 = (value: string) => (\n    //useCallback(\n    e: React.MouseEvent<HTMLLabelElement, MouseEvent>,\n  ) => {\n    e.stopPropagation(); // 안에 있는 radio event의 Propagation 을 방지\n    // console.log('click!'); // 두번 되네? 왜지?\n    // setValueAsync(value); //=> 앤또 왜없어도돼지?\n  };\n  // [selection],\n  //);\n\n  const inputChangeHandler = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      setValueAsync(e.target.value);\n    },\n    [selection], // dep가 중요\n  );\n  console.log(statement?.trim());\n  return (\n    <QuestElem>\n      <div>\n        {order + 1 + '. '}\n        {title}\n      </div>\n      <Statement statement={statement}>\n        {statement\n          ?.trim()\n          .split('\\n')\n          .reduce<any>((a, b) => {\n            return (\n              <React.Fragment>\n                {a && a}\n                {a && <br />}\n                {b}\n              </React.Fragment>\n            );\n          }, '')}\n      </Statement>\n      {choices.length !== 0 ? (\n        choices.map((x, i) => {\n          return (\n            <Selection\n              key={'select-id' + order + '-' + i}\n              selected={\n                type === 'binary'\n                  ? selection[order] === x\n                  : selection[order] === '' + i\n              }\n            >\n              <label\n                onClick={onClick2(type !== 'binary' ? '' + i : x)}\n                htmlFor={'select-' + order + '-' + i}\n              >\n                <input\n                  type=\"radio\"\n                  id={'select-' + order + '-' + i}\n                  name={'select-' + order}\n                  onChange={onChange2(type !== 'binary' ? '' + i : x)}\n                  checked={\n                    type === 'binary'\n                      ? selection[order] === x\n                      : selection[order] === '' + i\n                  }\n                />\n                <span>\n                  {type === 'binary' ? (x === 'T' ? '참' : '거짓') : x}\n                </span>\n              </label>\n            </Selection>\n          );\n        })\n      ) : (\n        <InputAnswer>\n          <input\n            type=\"text\"\n            placeholder=\"정답 입력\"\n            value={\n              selection[order] === null ? '' : selection[order]?.toString()\n            }\n            onChange={inputChangeHandler}\n          />\n        </InputAnswer>\n      )}\n    </QuestElem>\n  );\n}\n\nexport default QuestComp;\n","import React, { useState, useMemo, useCallback } from 'react';\nimport styled from 'styled-components';\nimport { Info } from '../contexts/MyLocalModel';\nimport QuestComp from './Quest';\n\nexport interface Quest {\n  type: 'binary' | 'selection' | 'short';\n  title: string;\n  statement: string | null;\n  choices: string[];\n  answers: string[];\n  materials: Info | null; // 직접적으론 필요없을수도 있어서.\n}\n\nexport interface Mocktest {\n  quests: Quest[];\n}\n\n// style //\nconst MockTestWrapper = styled.div`\n  width: 100%;\n  max-width: 600px;\n  display: flex;\n  flex-direction: column;\n  box-sizing: border-box;\n  position: relative;\n  background-color: white;\n  padding-bottom: 82px;\n  /* margin-bottom: 74px; */\n  z-index: 1;\n  overflow: scroll;\n  height: 100%;\n`;\n\nconst MockTestTitle = styled.div`\n  border-bottom: 1px solid black;\n  font-size: 2em;\n  padding: 30px 0;\n  margin-bottom: 66px;\n  text-align: center;\n`;\n\nconst MockTestBody = styled.ul`\n  list-style: none;\n  padding: 0;\n`;\n\nconst MockTestExit = styled.div`\n  text-align: center;\n  background-color: wheat;\n  position: fixed;\n  right: 0;\n  width: 100%;\n  max-width: 600px;\n  height: 74px;\n  bottom: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  & > button {\n    border: none;\n    text-align: center;\n    width: 100%;\n    height: 100%;\n    box-sizing: border-box;\n  }\n  & > button:nth-child(1) {\n    flex: 1;\n    color: black;\n    background-color: #eaeaea;\n  }\n  & > button:nth-child(2) {\n    flex: 1;\n    font-weight: bold;\n    background-color: rgb(24, 109, 238);\n    color: white;\n  }\n  & > button:disabled {\n    font-weight: normal;\n    background-color: rgba(24, 109, 238, 0.5);\n  }\n`;\n\nfunction MockTest({\n  Mocktest,\n  closeHandler,\n}: {\n  Mocktest: Mocktest;\n  closeHandler: Function;\n}) {\n  const [selection, setSelection] = useState<(string | null)[]>(\n    new Array(Mocktest.quests.length).fill(null), // 문제 수만큼 null로 채워진 배열\n  );\n\n  // const setInvidualFn = (idx: number) => {\n  //   return (value: string) => {\n  //     const newArray = selection.slice();\n  //     newArray[idx] = value;\n  //     setSelection(newArray);\n  //   };\n  // };\n\n  const closeClickHandler = useCallback(\n    (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\n      closeHandler();\n    },\n    [],\n  );\n  return (\n    <MockTestWrapper>\n      <MockTestExit>\n        <button>채점</button>\n        <button onClick={closeClickHandler}>닫기</button>\n      </MockTestExit>\n      <MockTestTitle>\n        <div>2020학년도 문제지</div>\n        <div>{selection}</div>\n      </MockTestTitle>\n      <MockTestBody>\n        {Mocktest.quests.map((x, i) => {\n          return (\n            <QuestComp\n              quest={x}\n              key={'quest-' + i}\n              order={i}\n              selection={selection}\n              setSelectionFn={setSelection}\n            />\n          );\n        })}\n      </MockTestBody>\n    </MockTestWrapper>\n  );\n}\n\nMockTest.defaultProps = {\n  Mocktest: {\n    quests: [\n      {\n        type: 'binary',\n        title: '(Demo) 다음 문장의 참/거짓을 판별하시오.',\n        statement: '무봉리순대국밥은 얼큰한 국물이 인상적이다.',\n        choices: ['T', 'F'],\n        answers: ['F'],\n        materials: null,\n      },\n      {\n        type: 'selection',\n        title: '다음 중 소고기국밥에 대한 설명으로 옳은 것을 고르시오.',\n        choices: [\n          '실제로는 없는 브랜드이다.',\n          '순대가 들어있다.',\n          '얼큰한 국물이 인상적이다.',\n          '어쩌면 하나쯤은 있을수도있다.',\n        ],\n        answers: ['0'],\n        materials: null,\n      },\n      {\n        type: 'short',\n        title: '1+1=',\n        choices: [],\n        answers: ['2'],\n        materials: null,\n      },\n      {\n        type: 'selection',\n        title: '인생을 왜 사나요?',\n        choices: ['죽기 위해서', '살기 위해서', '먹기 위해서', '싸기 위해서'],\n        answers: ['1'],\n        materials: null,\n      },\n      {\n        type: 'short',\n        title: '1+1=',\n        choices: [],\n        answers: ['2'],\n        materials: null,\n      },\n    ],\n  },\n};\n\nexport default MockTest;\n","import React, { useState, useCallback, useRef } from 'react';\nimport Modal from 'react-modal';\nimport './ModalTransition.scss';\nimport MockTest from './MockTest';\n\nModal.setAppElement('#root');\n\nconst customStyles = {\n  overlay: {\n    backgroundColor: 'rgba(0, 0, 0, 0.75)',\n  },\n  content: {\n    width: '100%',\n    minwidth: '370px',\n    maxWidth: '600px',\n    border: 'none',\n    borderRadius: 0,\n    // top: 'initial',\n    left: '50%',\n    right: 'auto',\n    bottom: 'auto',\n    marginRight: '-50%',\n    transform: 'translate(-50%, -50%)',\n    boxSizing: 'border-box',\n    height: '90vh',\n    overflow: 'hidden',\n    position: 'relative',\n    padding: '0', // 명시적으로 안써주면 20px가 생김\n  } as React.CSSProperties, // 이렇게 안하면 이상한 타입 에러 뜬다 https://stackoverflow.com/questions/46710747/type-string-is-not-assignable-to-type-inherit-initial-unset-fixe\n};\n\nfunction MockTestModal(props: any) {\n  function afterOpenModal() {\n    // 열리고 난 뒤 수행되는 액션을 정의\n    const body: HTMLElement = document.body;\n    body.style.position = 'fixed';\n  }\n\n  function afterCloseModal() {\n    const body: HTMLElement = document.body;\n    body.style.position = ''; // lock 해제\n  }\n  const closeTrigger = () => {\n    props.setModalIsOpen(false);\n  };\n\n  return (\n    <Modal\n      closeTimeoutMS={200}\n      isOpen={props.modalIsOpen}\n      style={customStyles}\n      contentLabel=\"MockTestModal\"\n      onAfterClose={afterCloseModal}\n      shouldCloseOnOverlayClick={false}\n      onAfterOpen={afterOpenModal}\n    >\n      <MockTest Mocktest={props.mockTestData} closeHandler={closeTrigger} />\n    </Modal>\n  );\n}\n\nMockTestModal.defaultProps = {\n  modalIsOpen: false,\n  setModalIsOpen: () => {},\n  mockTestData: null,\n  setMockTestData: () => {},\n};\n\nexport default MockTestModal;\n","import React, { useCallback, useState } from 'react';\nimport styled from 'styled-components';\nimport {\n  useMyLocalModel,\n  useMyLocalModelDispatch,\n  Attr as AttrType,\n  Info as InfoType,\n} from '../contexts/MyLocalModel';\n\nimport AttrModal from './AttrModal';\nimport MockTestModal from './MockTestModal';\n\n// vscode-styled-components 모듈 설치로 문자열화 방지.\nconst MainWrapper = styled.div`\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  box-sizing: border-box;\n  position: relative;\n`;\n\nconst CenterWrapper = styled.div`\n  width: 100%;\n  max-width: 600px;\n`;\n\nconst Button = styled.button`\n  border-radius: 50px;\n  padding: 5px;\n  min-width: 120px;\n  color: white;\n  font-weight: 600;\n  -webkit-appearance: none;\n  cursor: pointer;\n  &:active,\n  &:focus {\n    outline: none;\n  }\n  background-color: ${(props: { danger?: boolean }) =>\n    props.danger ? 'rgb(190,0,4)' : 'purple'};\n`;\n\nconst Subjects = styled.ul`\n  display: flex;\n  flex-wrap: wrap;\n  list-style: none;\n  padding: 0;\n  margin: 0;\n`;\nconst Subject = styled.li`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  width: 33%;\n  height: 150px;\n  box-sizing: border-box;\n  background-color: ${(props: { add?: boolean }) =>\n    props.add ? 'wheat' : 'rgb(237, 240, 241)'};\n  min-width: 120px;\n`;\n\nconst InfoWrapper = styled.div`\n  width: 100%;\n`;\n// const Comment = styled.div``;\nconst Attrs = styled.div`\n  display: flex;\n  flex-direction: column;\n`;\nconst Attr = styled.div`\n  &:before {\n    content: '(연필) ';\n  }\n  padding: 15px 0;\n`;\nconst InfoList = Subjects; // 동률 스타일\nconst Info = Subject; // 동률 스타일\n\nconst CreateProblemWrapper = styled.div`\n  text-align: center;\n  width: 90%;\n  max-width: 600px;\n  height: 75px;\n  position: fixed;\n  background-color: wheat;\n  bottom: -15px;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  box-sizing: border-box;\n`;\nconst CreateProblemButton = styled.button`\n  width: 100%;\n  height: 100%;\n  border: none;\n  text-align: center;\n  box-sizing: border-box;\n  font-size: 1.5em;\n  font-weight: bold;\n  background-color: rgb(190, 0, 4);\n  color: white;\n  &:disabled {\n    font-weight: normal;\n    background-color: rgba(190, 0, 4, 0.5);\n  }\n`;\n\nfunction Main() {\n  const dispatch = useMyLocalModelDispatch();\n  const MyLocalModel = useMyLocalModel();\n\n  /// Mocktest Modal Control state\n  const [isOpenMockTest, setIsOpenMockTest] = useState<boolean>(false);\n  const [mockTestData, setMockTestData] = useState<any>(null);\n  /// End-of Mocktest Modal Control state\n\n  const handleIntoSubject = useCallback(\n    (id: number) => (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\n      const moveToSubjectCallBack = (recvInfo: any) => {\n        console.log(recvInfo);\n        dispatch({\n          type: 'CHANGE_PATH',\n          path: MyLocalModel.LocalModel.getCurrentPath(),\n        }); // 패스를 체인지한다.\n        dispatch({\n          type: 'CHANGE_INFO',\n          info: recvInfo,\n        });\n        // setCanSolveProblem(recvInfo.attrs.length > 0); // 문제풀이 가능여부 state를 바꾼다..\n      };\n      MyLocalModel.LocalModel.moveToSubject(id, moveToSubjectCallBack);\n    },\n    [dispatch, MyLocalModel],\n  );\n  const handleIntoInfo = useCallback(\n    (idx: number) => (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\n      MyLocalModel.LocalModel.moveToChild(idx); // 하위 Info으로 이동.\n      const savedInfo = MyLocalModel.LocalModel.getCurrentInfo();\n      dispatch({\n        type: 'CHANGE_PATH',\n        path: MyLocalModel.LocalModel.getCurrentPath(),\n      });\n      dispatch({\n        type: 'CHANGE_INFO',\n        info: savedInfo,\n      });\n      // setCanSolveProblem(savedInfo.attrs.length > 0); // 문제풀이 가능여부 state를 바꾼다..\n    },\n    [dispatch, MyLocalModel],\n  );\n\n  const handleCreateAndIntoSubject = useCallback(\n    (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\n      const createdHandler = (info: InfoType) => {\n        const savedInfo = MyLocalModel.LocalModel.getCurrentInfo();\n        dispatch({\n          type: 'CHANGE_PATH',\n          path: MyLocalModel.LocalModel.getCurrentPath(),\n        });\n        dispatch({\n          type: 'CHANGE_INFO',\n          info: savedInfo,\n        });\n        // setCanSolveProblem(savedInfo.attrs.length > 0); // 문제풀이 가능여부 state를 바꾼다..\n      };\n      let input_subject: string | undefined | null = prompt('과목 이름은?');\n      if (\n        typeof input_subject === 'string' &&\n        input_subject.trim().length !== 0\n      ) {\n        MyLocalModel.LocalModel.createSubject(\n          input_subject.trim(),\n          createdHandler,\n        );\n      } else {\n        alert('유효하지 않는 과목 이름입니다.');\n      }\n    },\n    [dispatch, MyLocalModel],\n  );\n\n  const handleAddInfo = useCallback(\n    (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\n      const createdHandler = (info: InfoType) => {\n        const savedInfo = MyLocalModel.LocalModel.getCurrentInfo();\n        dispatch({\n          type: 'CHANGE_PATH',\n          path: MyLocalModel.LocalModel.getCurrentPath(),\n        });\n        dispatch({\n          type: 'CHANGE_INFO',\n          info: savedInfo,\n        });\n        // setCanSolveProblem(savedInfo.attrs.length > 0); // 문제풀이 가능여부 state를 바꾼다..\n      };\n      let input_info: string | undefined | null = prompt('정보 이름은?');\n      if (typeof input_info === 'string' && input_info.trim().length !== 0) {\n        MyLocalModel.LocalModel.createInfo(input_info.trim(), createdHandler);\n      } else {\n        alert('유효하지 않는 정보 이름입니다.');\n      }\n    },\n    [dispatch, MyLocalModel],\n  );\n\n  const handleCreateMockTest = useCallback(\n    (e: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\n      setMockTestData(MyLocalModel.LocalModel.createMocktest(5));\n      setIsOpenMockTest(true);\n    },\n    [MyLocalModel],\n  );\n\n  return (\n    <MainWrapper>\n      <CenterWrapper>\n        {MyLocalModel.currentPath.length === 0 ? (\n          <Subjects>\n            <Subject add>\n              <button onClick={handleCreateAndIntoSubject}>과목 추가</button>\n            </Subject>\n            {MyLocalModel.subjects.map((x, i) => {\n              return (\n                <Subject key={'subjects-' + x.id}>\n                  <div>{x.name}</div>\n                  <Button onClick={handleIntoSubject(x.id)}>이동</Button>\n                </Subject>\n              );\n            })}\n          </Subjects>\n        ) : (\n          <InfoWrapper>\n            {/* <Comment>코멘트 : {MyLocalModel.info?.comment}</Comment> */}\n            <Attrs>\n              <Attr>\n                {MyLocalModel.info?.names && (\n                  <AttrModal name={MyLocalModel.info.names} />\n                )}\n              </Attr>\n              {MyLocalModel.info?.attrs.map((x: AttrType, i: number) => {\n                return <Attr key={'Attr-' + i}>{x.getFullSentence()}</Attr>;\n              })}\n            </Attrs>\n            <hr />\n            <InfoList>\n              <Info>\n                <button onClick={handleAddInfo}>정보 추가</button>\n              </Info>\n              {MyLocalModel.info?.childs.map((x: InfoType, i: number) => {\n                return (\n                  <Info key={'Info-' + i}>\n                    {x.names.join(' | ')}\n                    <Button danger onClick={handleIntoInfo(i)}>\n                      {'하위 정보 이동'}\n                    </Button>\n                  </Info>\n                );\n              })}\n            </InfoList>\n            <CreateProblemWrapper>\n              <CreateProblemButton\n                disabled={MyLocalModel.info?.attrs.length === 0}\n                onClick={handleCreateMockTest}\n              >\n                문제 풀기\n              </CreateProblemButton>\n              <MockTestModal\n                modalIsOpen={isOpenMockTest && mockTestData !== null}\n                setMockTestData={setMockTestData}\n                setModalIsOpen={setIsOpenMockTest}\n                mockTestData={mockTestData}\n              />\n            </CreateProblemWrapper>\n          </InfoWrapper>\n        )}\n      </CenterWrapper>\n    </MainWrapper>\n  );\n}\n\nexport default Main;\n","import React, { useEffect } from 'react';\nimport {\n  useMyLocalModelDispatch,\n  useMyLocalModel,\n} from './contexts/MyLocalModel';\n\nimport Gnb from './components/Gnb';\nimport Main from './components/Main';\nimport MockTest from './components/MockTest';\n\nfunction AppIn() {\n  const { LocalModel } = useMyLocalModel();\n  const dispatch = useMyLocalModelDispatch();\n  // 앱이 로드되면 다음 액션들을 차례로 디스패치함.\n  useEffect(() => {\n    if (LocalModel.wp !== null) return; // 최상단이 아니면 아래의 액션들은 실행할 필요가 없습니다.\n    // console.log('메인으로 옴. 주제 리스트를 뽑아옵니다.');\n    // 이 부분은 한번 호출되어서\n    const getSubjectsListCallBack = (recv: any) => {\n      // console.log(recv);\n      dispatch({\n        type: 'CHANGE_SUBJECTS',\n        subjects: recv,\n      });\n    };\n    LocalModel.getSubjectsList(getSubjectsListCallBack);\n  }, [LocalModel, dispatch, LocalModel.wp]);\n  return (\n    <div className=\"App\" onClick={(e) => e.preventDefault()}>\n      <Gnb />\n      <Main />\n      {/* <MockTest /> */}\n    </div>\n  );\n}\n\nexport default AppIn;\n","import React from 'react';\nimport { MyLocalModelContextProvider } from './contexts/MyLocalModel';\n// import { ModalProvider } from 'react-modal-hook';\nimport './App.scss';\nimport AppIn from './AppIn';\n\nfunction App() {\n  return (\n    <MyLocalModelContextProvider>\n      <AppIn />\n    </MyLocalModelContextProvider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}